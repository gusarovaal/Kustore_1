/*
  # Add sample products with measurements

  1. New Tables
    - No new tables, updating existing products table
  
  2. Sample Data
    - Add sample products with different categories
    - Include measurements for each size
    - Add realistic product data for testing
  
  3. Security
    - Uses existing RLS policies
*/

-- First, let's add some sample products with measurements
INSERT INTO products (
  name, 
  price, 
  sale_price,
  image_url, 
  images,
  image_alt_texts,
  category, 
  description, 
  sizes, 
  in_stock, 
  is_new, 
  is_on_sale,
  measurements
) VALUES 
-- Tops/Shirts
(
  'Классическая белая рубашка',
  4500,
  NULL,
  'https://images.pexels.com/photos/996329/pexels-photo-996329.jpeg',
  ARRAY['https://images.pexels.com/photos/996329/pexels-photo-996329.jpeg', 'https://images.pexels.com/photos/1040945/pexels-photo-1040945.jpeg'],
  ARRAY['Белая рубашка', 'Детали рубашки'],
  'shirts',
  'Элегантная классическая белая рубашка из премиального хлопка. Идеально подходит для офиса и особых случаев.',
  ARRAY['XS', 'S', 'M', 'L', 'XL'],
  true,
  true,
  false,
  '{
    "XS": {
      "Грудь": "80-84 см",
      "Талия": "60-64 см", 
      "Бедра": "86-90 см",
      "Длина": "65 см",
      "Рукав": "58 см"
    },
    "S": {
      "Грудь": "84-88 см",
      "Талия": "64-68 см",
      "Бедра": "90-94 см", 
      "Длина": "67 см",
      "Рукав": "60 см"
    },
    "M": {
      "Грудь": "88-92 см",
      "Талия": "68-72 см",
      "Бедра": "94-98 см",
      "Длина": "69 см", 
      "Рукав": "62 см"
    },
    "L": {
      "Грудь": "92-96 см",
      "Талия": "72-76 см",
      "Бедра": "98-102 см",
      "Длина": "71 см",
      "Рукав": "64 см"
    },
    "XL": {
      "Грудь": "96-100 см",
      "Талия": "76-80 см",
      "Бедра": "102-106 см",
      "Длина": "73 см",
      "Рукав": "66 см"
    }
  }'::jsonb
),
-- Dress
(
  'Элегантное черное платье',
  7800,
  6240,
  'https://images.pexels.com/photos/1536619/pexels-photo-1536619.jpeg',
  ARRAY['https://images.pexels.com/photos/1536619/pexels-photo-1536619.jpeg', 'https://images.pexels.com/photos/1462637/pexels-photo-1462637.jpeg'],
  ARRAY['Черное платье', 'Детали платья'],
  'dresses',
  'Стильное черное платье для особых случаев. Классический крой подчеркивает силуэт.',
  ARRAY['XS', 'S', 'M', 'L', 'XL'],
  true,
  false,
  true,
  '{
    "XS": {
      "Грудь": "80-84 см",
      "Талия": "60-64 см",
      "Бедра": "86-90 см", 
      "Длина": "95 см"
    },
    "S": {
      "Грудь": "84-88 см",
      "Талия": "64-68 см",
      "Бедра": "90-94 см",
      "Длина": "97 см"
    },
    "M": {
      "Грудь": "88-92 см", 
      "Талия": "68-72 см",
      "Бедра": "94-98 см",
      "Длина": "99 см"
    },
    "L": {
      "Грудь": "92-96 см",
      "Талия": "72-76 см",
      "Бедра": "98-102 см",
      "Длина": "101 см"
    },
    "XL": {
      "Грудь": "96-100 см",
      "Талия": "76-80 см", 
      "Бедра": "102-106 см",
      "Длина": "103 см"
    }
  }'::jsonb
),
-- Jeans
(
  'Классические джинсы',
  5200,
  NULL,
  'https://images.pexels.com/photos/1598507/pexels-photo-1598507.jpeg',
  ARRAY['https://images.pexels.com/photos/1598507/pexels-photo-1598507.jpeg', 'https://images.pexels.com/photos/1598505/pexels-photo-1598505.jpeg'],
  ARRAY['Джинсы', 'Детали джинсов'],
  'jeans',
  'Удобные классические джинсы из качественного денима. Универсальная модель для повседневной носки.',
  ARRAY['XS', 'S', 'M', 'L', 'XL'],
  true,
  false,
  false,
  '{
    "XS": {
      "Талия": "60-64 см",
      "Бедра": "86-90 см",
      "Длина по внутр. шву": "76 см",
      "Общая длина": "100 см"
    },
    "S": {
      "Талия": "64-68 см", 
      "Бедра": "90-94 см",
      "Длина по внутр. шву": "78 см",
      "Общая длина": "102 см"
    },
    "M": {
      "Талия": "68-72 см",
      "Бедра": "94-98 см",
      "Длина по внутр. шву": "80 см",
      "Общая длина": "104 см"
    },
    "L": {
      "Талия": "72-76 см",
      "Бедра": "98-102 см",
      "Длина по внутр. шву": "82 см", 
      "Общая длина": "106 см"
    },
    "XL": {
      "Талия": "76-80 см",
      "Бедра": "102-106 см",
      "Длина по внутр. шву": "84 см",
      "Общая длина": "108 см"
    }
  }'::jsonb
),
-- Sweater
(
  'Уютный вязаный свитер',
  6800,
  NULL,
  'https://images.pexels.com/photos/1536619/pexels-photo-1536619.jpeg',
  ARRAY['https://images.pexels.com/photos/1536619/pexels-photo-1536619.jpeg'],
  ARRAY['Вязаный свитер'],
  'sweaters',
  'Мягкий и теплый вязаный свитер из натуральной шерсти. Идеален для прохладной погоды.',
  ARRAY['S', 'M', 'L', 'XL'],
  true,
  true,
  false,
  '{
    "S": {
      "Грудь": "84-88 см",
      "Талия": "64-68 см",
      "Бедра": "90-94 см", 
      "Длина": "67 см",
      "Рукав": "60 см"
    },
    "M": {
      "Грудь": "88-92 см",
      "Талия": "68-72 см",
      "Бедра": "94-98 см",
      "Длина": "69 см", 
      "Рукав": "62 см"
    },
    "L": {
      "Грудь": "92-96 см",
      "Талия": "72-76 см",
      "Бедра": "98-102 см",
      "Длина": "71 см",
      "Рукав": "64 см"
    },
    "XL": {
      "Грудь": "96-100 см",
      "Талия": "76-80 см",
      "Бедра": "102-106 см",
      "Длина": "73 см",
      "Рукав": "66 см"
    }
  }'::jsonb
),
-- Skirt
(
  'Мини-юбка из твида',
  3900,
  2730,
  'https://images.pexels.com/photos/1536619/pexels-photo-1536619.jpeg',
  ARRAY['https://images.pexels.com/photos/1536619/pexels-photo-1536619.jpeg'],
  ARRAY['Твидовая юбка'],
  'skirts',
  'Стильная мини-юбка из качественного твида. Отлично сочетается с блузками и свитерами.',
  ARRAY['XS', 'S', 'M', 'L'],
  true,
  false,
  true,
  '{
    "XS": {
      "Талия": "60-64 см",
      "Бедра": "86-90 см",
      "Длина": "45 см"
    },
    "S": {
      "Талия": "64-68 см",
      "Бедра": "90-94 см", 
      "Длина": "46 см"
    },
    "M": {
      "Талия": "68-72 см",
      "Бедра": "94-98 см",
      "Длина": "47 см"
    },
    "L": {
      "Талия": "72-76 см",
      "Бедра": "98-102 см",
      "Длина": "48 см"
    }
  }'::jsonb
),
-- Bag
(
  'Кожаная сумка-тоут',
  8900,
  NULL,
  'https://images.pexels.com/photos/1536619/pexels-photo-1536619.jpeg',
  ARRAY['https://images.pexels.com/photos/1536619/pexels-photo-1536619.jpeg'],
  ARRAY['Кожаная сумка'],
  'bags',
  'Просторная кожаная сумка-тоут из натуральной кожи. Идеальна для работы и повседневного использования.',
  ARRAY['ONE SIZE'],
  true,
  true,
  false,
  '{
    "ONE SIZE": {
      "Ширина": "35 см",
      "Высота": "25 см", 
      "Глубина": "12 см",
      "Длина ручек": "60 см"
    }
  }'::jsonb
);

-- Update any existing products that don't have measurements
UPDATE products 
SET measurements = CASE 
  WHEN category IN ('shirts', 'tops', 'sweaters', 'hoodies', 'jackets', 'blazers') THEN 
    '{
      "XS": {"Грудь": "80-84 см", "Талия": "60-64 см", "Бедра": "86-90 см", "Длина": "65 см", "Рукав": "58 см"},
      "S": {"Грудь": "84-88 см", "Талия": "64-68 см", "Бедра": "90-94 см", "Длина": "67 см", "Рукав": "60 см"},
      "M": {"Грудь": "88-92 см", "Талия": "68-72 см", "Бедра": "94-98 см", "Длина": "69 см", "Рукав": "62 см"},
      "L": {"Грудь": "92-96 см", "Талия": "72-76 см", "Бедра": "98-102 см", "Длина": "71 см", "Рукав": "64 см"},
      "XL": {"Грудь": "96-100 см", "Талия": "76-80 см", "Бедра": "102-106 см", "Длина": "73 см", "Рукав": "66 см"}
    }'::jsonb
  WHEN category IN ('dresses') THEN 
    '{
      "XS": {"Грудь": "80-84 см", "Талия": "60-64 см", "Бедра": "86-90 см", "Длина": "95 см"},
      "S": {"Грудь": "84-88 см", "Талия": "64-68 см", "Бедра": "90-94 см", "Длина": "97 см"},
      "M": {"Грудь": "88-92 см", "Талия": "68-72 см", "Бедра": "94-98 см", "Длина": "99 см"},
      "L": {"Грудь": "92-96 см", "Талия": "72-76 см", "Бедра": "98-102 см", "Длина": "101 см"},
      "XL": {"Грудь": "96-100 см", "Талия": "76-80 см", "Бедра": "102-106 см", "Длина": "103 см"}
    }'::jsonb
  WHEN category IN ('pants', 'jeans', 'trousers', 'shorts', 'bottoms') THEN 
    '{
      "XS": {"Талия": "60-64 см", "Бедра": "86-90 см", "Длина по внутр. шву": "76 см", "Общая длина": "100 см"},
      "S": {"Талия": "64-68 см", "Бедра": "90-94 см", "Длина по внутр. шву": "78 см", "Общая длина": "102 см"},
      "M": {"Талия": "68-72 см", "Бедра": "94-98 см", "Длина по внутр. шву": "80 см", "Общая длина": "104 см"},
      "L": {"Талия": "72-76 см", "Бедра": "98-102 см", "Длина по внутр. шву": "82 см", "Общая длина": "106 см"},
      "XL": {"Талия": "76-80 см", "Бедра": "102-106 см", "Длина по внутр. шву": "84 см", "Общая длина": "108 см"}
    }'::jsonb
  WHEN category IN ('skirts') THEN 
    '{
      "XS": {"Талия": "60-64 см", "Бедра": "86-90 см", "Длина": "45 см"},
      "S": {"Талия": "64-68 см", "Бедра": "90-94 см", "Длина": "46 см"},
      "M": {"Талия": "68-72 см", "Бедра": "94-98 см", "Длина": "47 см"},
      "L": {"Талия": "72-76 см", "Бедра": "98-102 см", "Длина": "48 см"},
      "XL": {"Талия": "76-80 см", "Бедра": "102-106 см", "Длина": "49 см"}
    }'::jsonb
  WHEN category IN ('accessories', 'bags', 'handbags') THEN 
    '{
      "ONE SIZE": {"Ширина": "35 см", "Высота": "25 см", "Глубина": "12 см", "Длина ручек": "60 см"}
    }'::jsonb
  WHEN category IN ('shoes', 'footwear', 'sneakers', 'boots') THEN 
    '{
      "36": {"Длина стопы": "23 см", "Ширина": "8.5 см"},
      "37": {"Длина стопы": "23.5 см", "Ширина": "8.7 см"},
      "38": {"Длина стопы": "24.5 см", "Ширина": "9 см"},
      "39": {"Длина стопы": "25 см", "Ширина": "9.2 см"},
      "40": {"Длина стопы": "25.5 см", "Ширина": "9.5 см"},
      "41": {"Длина стопы": "26.5 см", "Ширина": "9.7 см"}
    }'::jsonb
  ELSE '{}'::jsonb
END
WHERE measurements IS NULL OR measurements = '{}'::jsonb;